<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Dropdown</title>
    <!-- Include Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <!-- Include custom CSS -->
    <link rel="stylesheet" href="user_assets/css/userprofile.css">
    <link href="/user_assets/Images/FAVICON.ico" rel="icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.css">
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>



</head>
<body>
    <%-include('../../partials/userheader') %>

    <div class="container mb-4">
        <div class="row">
 
            <%-include('../../partials/userprofileaside') %>

            <!-- Wishlist-->
            <div class="col-lg-8 pb-5">
                <!-- <form class="row p-5" action="/changedpassword" method="post">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="account-fn">Current Password</label>
                            <input class="form-control" type="password" id="account-fn" name="cr_password"   required="">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="account-ln">New Password</label>
                            <input class="form-control" type="password" id="account-pass" name="new_password" required>
                        </div>
                    </div>
                 
                    <div class="col-md-6 pt-5">
                        <div class="form-group">
                            <label for="account-pass">Confirm Password</label>
                            <input class="form-control" type="password" id="account-pass" name="confirm_password" required>
                        </div>
                    </div>
                    <div class="col-md-6 pt-5">
                        <div class="form-group">
                            <label for="account-confirm-pass">.</label>
                             <button class="form-control btn-primary"> Change Password</button>
                        </div>
                    </div>
                </form> -->
 
                <form class="row p-5" action="/changedpassword" method="post" onsubmit="return validateForm()">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="account-fn">Current Password</label>
                            <div class="input-group">
                                <input class="form-control" type="password" id="current-password" name="cr_password" required>
                                <div class="input-group-append">
                                    <span class="input-group-text">
                                        <i class="fa fa-eye" id="toggle-current-password"></i>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="account-ln">New Password</label>
                            <div class="input-group">
                                <input class="form-control" type="password" id="new-password" name="new_password" required>
                                <div class="input-group-append">
                                    <span class="input-group-text">
                                        <i class="fa fa-eye" id="toggle-new-password"></i>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                
                    <div class="col-md-6 pt-5">
                        <div class="form-group">
                            <label for="account-pass">Confirm Password</label>
                            <div class="input-group">
                                <input class="form-control" type="password" id="confirm-password" name="confirm_password" required>
                                <div class="input-group-append">
                                    <span class="input-group-text">
                                        <i class="fa fa-eye" id="toggle-confirm-password"></i>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 pt-5">
                        <div class="form-group">
                            <label for="account-confirm-pass">.</label>
                            <button class="form-control btn-primary">Change Password</button>
                        </div>
                    </div>
                </form>
                
                <!-- <script>
                    // Toggle password visibility
                    function togglePassword(inputId, eyeIconId) {
                        var passwordInput = document.getElementById(inputId);
                        var eyeIcon = document.getElementById(eyeIconId);
                
                        if (passwordInput.type === "password") {
                            passwordInput.type = "text";
                            eyeIcon.classList.remove("fa-eye");
                            eyeIcon.classList.add("fa-eye-slash");
                        } else {
                            passwordInput.type = "password";
                            eyeIcon.classList.remove("fa-eye-slash");
                            eyeIcon.classList.add("fa-eye");
                        }
                    }
                
                    // Add click event listeners to the eye icons
                    document.getElementById("toggle-current-password").addEventListener("click", function () {
                        togglePassword("current-password", "toggle-current-password");
                    });
                
                    document.getElementById("toggle-new-password").addEventListener("click", function () {
                        togglePassword("new-password", "toggle-new-password");
                    });
                
                    document.getElementById("toggle-confirm-password").addEventListener("click", function () {
                        togglePassword("confirm-password", "toggle-confirm-password");
                    });
                </script> -->
                <script>
                    // Toggle password visibility
                    function togglePassword(inputId, eyeIconId) {
                      var passwordInput = document.getElementById(inputId);
                      var eyeIcon = document.getElementById(eyeIconId);
                  
                      if (passwordInput.type === "password") {
                        passwordInput.type = "text";
                        eyeIcon.classList.remove("fa-eye");
                        eyeIcon.classList.add("fa-eye-slash");
                      } else {
                        passwordInput.type = "password";
                        eyeIcon.classList.remove("fa-eye-slash");
                        eyeIcon.classList.add("fa-eye");
                      }
                    }
                  
                    // Add click event listeners to the eye icons
                    document.getElementById("toggle-current-password").addEventListener("click", function () {
                      togglePassword("current-password", "toggle-current-password");
                    });
                  
                    document.getElementById("toggle-new-password").addEventListener("click", function () {
                      togglePassword("new-password", "toggle-new-password");
                    });
                  
                    document.getElementById("toggle-confirm-password").addEventListener("click", function () {
                      togglePassword("confirm-password", "toggle-confirm-password");
                    });
                  
                      // Form validation function
 
                  </script>
                    <script>
                        // Form validation function for New Password
                        function validateForm() {
                          var newPassword = document.getElementById("new-password").value.trim();
                    
                          // Check if the trimmed new password is exactly 6 characters long
                          if (newPassword.length !== 6 ) {
                            // Use SweetAlert for an error message
                            Swal.fire({
                              icon: 'error',
                              title: 'Error',
                              text: 'New password must be exactly 6 characters long.',
                              confirmButtonColor: '#d33',
                            });
                            return false; // Prevent form submission
                          }
                    
                          // Additional validation logic can be added here if needed
                    
                          return true; // Allow form submission
                        }
                      </script>
                

                
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
          
            if ('<%= message %>' != '') {
            const errorMessage = '<%= message %>'; // Assuming 'msg' is the variable from the server

            if (errorMessage) {
                Toastify({
                    text: errorMessage,
                    duration: 3000, // Duration in milliseconds (adjust as needed)
                    gravity: 'top', // Position: 'top', 'bottom', 'center'
                    position: 'left', // Alignment: 'left', 'right', 'center'
                    backgroundColor: 'red', // Background color
                    stopOnFocus: true, // Stops the toast when focused
                    style: {
                        // Adjust the font size and padding to increase toast size
                        fontSize: '20px', // Increase the font size
                        padding: '30px' // Increase padding for height and width
                        
                    }
                }).showToast();
            }
        }
        });
    </script>
 </script>
 
</body>
</html>
